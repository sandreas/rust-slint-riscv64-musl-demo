import { Icons, Navigation, Preferences } from "globals.slint";

export { Navigation }

import {
    Button,
    HorizontalBox,
    Palette,
    ScrollView,
    Slider,
    Switch,
    VerticalBox,
} from "std-widgets.slint";
import { Navigator } from "navigator.slint";

import { Home } from "home.slint";
import { Audiobooks } from "main/audiobooks.slint";
import { Music } from "main/music.slint";
import { Search } from "main/search.slint";
import { Settings } from "main/settings.slint";



export component MainWindow inherits Window {
    in-out property <physical-length> swipe-area-width: 50px;

    // 368 x 552
    preferred-width: 368px;
    preferred-height: 552px;

    init => {
        // load preferences
        // restore route
    }

    SwipeGestureHandler {
        x: 0;
        y: 0;
        width: swipe-area-width;
        height: 100%;
        handle-swipe-right: true;
        handle-swipe-left: false;
        swiped => {
            Navigation.back()
        }
    }

    VerticalBox {
        HorizontalBox {
            Button {
                text: "<";
                clicked => {
                    Navigation.back();
                }
            }

            Button {
                text: ">";
                clicked => {
                    Navigation.forward();
                }
            }
        }

        ScrollView {
            if Navigation.route[0] == "home": Home { }
            if Navigation.route[0] == "audiobooks": Audiobooks { }
            if Navigation.route[0] == "music": Music { }
            if Navigation.route[0] == "settings": Settings { }
            if Navigation.route[0] == "search": Search { }
        }
    }

    SwipeGestureHandler {
        x: root.width - swipe-area-width;
        y: 0;
        width: swipe-area-width;
        height: 100%;
        handle-swipe-right: false;
        handle-swipe-left: true;
        swiped => {
            Navigation.forward()
        }
    }
}
